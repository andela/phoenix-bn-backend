{"version":3,"sources":["../../src/config/passport.js"],"names":["passport","require","LocalStrategy","Strategy","mongoose","User","model","use","usernameField","passwordField","email","password","done","findOne","then","user","validPassword","errors"],"mappings":";;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMC,aAAa,GAAGD,OAAO,CAAC,gBAAD,CAAP,CAA0BE,QAAhD;;AACA,IAAMC,QAAQ,GAAGH,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMI,IAAI,GAAGD,QAAQ,CAACE,KAAT,CAAe,MAAf,CAAb;AAEAN,QAAQ,CAACO,GAAT,CACI,IAAIL,aAAJ,CACI;AACIM,EAAAA,aAAa,EAAE,aADnB;AAEIC,EAAAA,aAAa,EAAE;AAFnB,CADJ,EAKI,UAASC,KAAT,EAAgBC,QAAhB,EAA0BC,IAA1B,EAAgC;AAC5BP,EAAAA,IAAI,CAACQ,OAAL,CAAa;AAAEH,IAAAA,KAAK,EAAEA;AAAT,GAAb,EACKI,IADL,CACU,UAASC,IAAT,EAAe;AACjB,QAAI,CAACA,IAAD,IAAS,CAACA,IAAI,CAACC,aAAL,CAAmBL,QAAnB,CAAd,EAA4C;AACxC,aAAOC,IAAI,CAAC,IAAD,EAAO,KAAP,EAAc;AACrBK,QAAAA,MAAM,EAAE;AAAE,+BAAqB;AAAvB;AADa,OAAd,CAAX;AAGH;;AAED,WAAOL,IAAI,CAAC,IAAD,EAAOG,IAAP,CAAX;AACH,GATL,WAUWH,IAVX;AAWH,CAjBL,CADJ","sourcesContent":["const passport = require(\"passport\");\nconst LocalStrategy = require(\"passport-local\").Strategy;\nconst mongoose = require(\"mongoose\");\nconst User = mongoose.model(\"User\");\n\npassport.use(\n    new LocalStrategy(\n        {\n            usernameField: \"user[email]\",\n            passwordField: \"user[password]\"\n        },\n        function(email, password, done) {\n            User.findOne({ email: email })\n                .then(function(user) {\n                    if (!user || !user.validPassword(password)) {\n                        return done(null, false, {\n                            errors: { \"email or password\": \"is invalid\" }\n                        });\n                    }\n\n                    return done(null, user);\n                })\n                .catch(done);\n        }\n    )\n);\n"],"file":"passport.js"}